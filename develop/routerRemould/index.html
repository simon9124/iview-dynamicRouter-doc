<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>è·¯ç”±æ”¹é€  | iView DynamicRouter</title>
    <meta name="generator" content="VuePress 1.5.0">
    <link rel="icon" href="/iview-dynamicRouter-doc/favicon.ico">
    <meta name="description" content="åŸºäº iview-admin çš„åç«¯åŠ¨æ€ç”Ÿæˆè·¯ç”±æ¨¡æ¿">
    <link rel="preload" href="/iview-dynamicRouter-doc/assets/css/0.styles.8b9d209c.css" as="style"><link rel="preload" href="/iview-dynamicRouter-doc/assets/js/app.05072671.js" as="script"><link rel="preload" href="/iview-dynamicRouter-doc/assets/js/2.cbc301c3.js" as="script"><link rel="preload" href="/iview-dynamicRouter-doc/assets/js/15.23f75260.js" as="script"><link rel="prefetch" href="/iview-dynamicRouter-doc/assets/js/10.3a577142.js"><link rel="prefetch" href="/iview-dynamicRouter-doc/assets/js/11.4ed2a332.js"><link rel="prefetch" href="/iview-dynamicRouter-doc/assets/js/12.70f2d81f.js"><link rel="prefetch" href="/iview-dynamicRouter-doc/assets/js/13.fb68dbed.js"><link rel="prefetch" href="/iview-dynamicRouter-doc/assets/js/14.d04a55e5.js"><link rel="prefetch" href="/iview-dynamicRouter-doc/assets/js/16.81f5a864.js"><link rel="prefetch" href="/iview-dynamicRouter-doc/assets/js/17.f75682ea.js"><link rel="prefetch" href="/iview-dynamicRouter-doc/assets/js/18.20135df0.js"><link rel="prefetch" href="/iview-dynamicRouter-doc/assets/js/19.5b6354de.js"><link rel="prefetch" href="/iview-dynamicRouter-doc/assets/js/20.bc9487e3.js"><link rel="prefetch" href="/iview-dynamicRouter-doc/assets/js/21.285706ea.js"><link rel="prefetch" href="/iview-dynamicRouter-doc/assets/js/22.cee5b6d1.js"><link rel="prefetch" href="/iview-dynamicRouter-doc/assets/js/23.83bfe31c.js"><link rel="prefetch" href="/iview-dynamicRouter-doc/assets/js/24.7f35b35e.js"><link rel="prefetch" href="/iview-dynamicRouter-doc/assets/js/25.62b31e3a.js"><link rel="prefetch" href="/iview-dynamicRouter-doc/assets/js/26.1f6064fc.js"><link rel="prefetch" href="/iview-dynamicRouter-doc/assets/js/27.a41cc54f.js"><link rel="prefetch" href="/iview-dynamicRouter-doc/assets/js/3.2dad5878.js"><link rel="prefetch" href="/iview-dynamicRouter-doc/assets/js/4.c2c9c270.js"><link rel="prefetch" href="/iview-dynamicRouter-doc/assets/js/5.80e4ca2a.js"><link rel="prefetch" href="/iview-dynamicRouter-doc/assets/js/6.13d890a1.js"><link rel="prefetch" href="/iview-dynamicRouter-doc/assets/js/7.6c7b94b8.js"><link rel="prefetch" href="/iview-dynamicRouter-doc/assets/js/8.8b48d297.js"><link rel="prefetch" href="/iview-dynamicRouter-doc/assets/js/9.cefde122.js">
    <link rel="stylesheet" href="/iview-dynamicRouter-doc/assets/css/0.styles.8b9d209c.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/iview-dynamicRouter-doc/" class="home-link router-link-active"><!----> <span class="site-name">iView DynamicRouter</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/iview-dynamicRouter-doc/" class="nav-link">
  é¦–é¡µ
</a></div><div class="nav-item"><a href="/iview-dynamicRouter-doc/document/guide/" class="nav-link">
  é…ç½®æ–‡æ¡£
</a></div><div class="nav-item"><a href="/iview-dynamicRouter-doc/develop/axios/" class="nav-link">
  å¼€å‘æŒ‡å—
</a></div><div class="nav-item"><a href="https://github.com/simon9124/iview-dynamicRouter" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/iview-dynamicRouter-doc/" class="nav-link">
  é¦–é¡µ
</a></div><div class="nav-item"><a href="/iview-dynamicRouter-doc/document/guide/" class="nav-link">
  é…ç½®æ–‡æ¡£
</a></div><div class="nav-item"><a href="/iview-dynamicRouter-doc/develop/axios/" class="nav-link">
  å¼€å‘æŒ‡å—
</a></div><div class="nav-item"><a href="https://github.com/simon9124/iview-dynamicRouter" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>1.axios æ”¹é€ </span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/iview-dynamicRouter-doc/develop/axios/" class="sidebar-link">æ€»è§ˆ</a></li><li><a href="/iview-dynamicRouter-doc/develop/axios/achievement.html" class="sidebar-link">æ€»ç»“ &amp; æˆæœ</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>2.mockData</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/iview-dynamicRouter-doc/develop/mockData/" class="sidebar-link">æ€»è§ˆ</a></li><li><a href="/iview-dynamicRouter-doc/develop/mockData/achievement.html" class="sidebar-link">æ€»ç»“ &amp; æˆæœ</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>3.è·¯ç”±æ•°æ®å¤„ç†</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/iview-dynamicRouter-doc/develop/routerData/" class="sidebar-link">æ€»è§ˆ</a></li><li><a href="/iview-dynamicRouter-doc/develop/routerData/achievement.html" class="sidebar-link">æ€»ç»“ &amp; æˆæœ</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>4.è·¯ç”±æ”¹é€ </span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/iview-dynamicRouter-doc/develop/routerRemould/debug.html" class="sidebar-link">è°ƒè¯•</a></li><li><a href="/iview-dynamicRouter-doc/develop/routerRemould/" class="active sidebar-link">æ€»è§ˆ</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/iview-dynamicRouter-doc/develop/routerRemould/#libs-router-util-js" class="sidebar-link">libs &gt; router-util.js</a></li><li class="sidebar-sub-header"><a href="/iview-dynamicRouter-doc/develop/routerRemould/#router-routers-js" class="sidebar-link">router &gt; routers.js</a></li><li class="sidebar-sub-header"><a href="/iview-dynamicRouter-doc/develop/routerRemould/#router-index-js" class="sidebar-link">router &gt; index.js</a></li><li class="sidebar-sub-header"><a href="/iview-dynamicRouter-doc/develop/routerRemould/#store-module-app-js" class="sidebar-link">store &gt; module &gt; app.js</a></li><li class="sidebar-sub-header"><a href="/iview-dynamicRouter-doc/develop/routerRemould/#view-login-login-vue" class="sidebar-link">view &gt; login &gt; login.vue</a></li></ul></li><li><a href="/iview-dynamicRouter-doc/develop/routerRemould/achievement.html" class="sidebar-link">æ€»ç»“ &amp; æˆæœ</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>5.èœå•æ¸²æŸ“</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/iview-dynamicRouter-doc/develop/menuRender/menuVSRouter.html" class="sidebar-link">èœå•VSè·¯ç”±</a></li><li><a href="/iview-dynamicRouter-doc/develop/menuRender/" class="sidebar-link">æ€»è§ˆ</a></li><li><a href="/iview-dynamicRouter-doc/develop/menuRender/achievement.html" class="sidebar-link">æ€»ç»“ &amp; æˆæœ</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="è·¯ç”±æ”¹é€ "><a href="#è·¯ç”±æ”¹é€ " class="header-anchor">#</a> è·¯ç”±æ”¹é€ </h1> <p><a href="/iview-dynamicRouter-doc/develop/routerData/">è·¯ç”±æ•°æ®å¤„ç†</a>ã€<code>è·¯ç”±æ”¹é€ </code>ã€<a href="/iview-dynamicRouter-doc/develop/menuRender/">èœå•æ¸²æŸ“</a> æ˜¯æ•´ä¸ªå¼€å‘æ­¥éª¤çš„æ ¸å¿ƒéƒ¨åˆ†ã€‚<code>è·¯ç”±æ”¹é€ </code> æ—¶ï¼Œéœ€è¦å¼€å‘è€…ç†æ¸…å…¶å®Œæ•´çš„æ€è·¯ï¼Œ<code>æ‰‹åŠ¨æ·»åŠ ç›¸å…³è·¯ç”±</code> å¹¶é€‚æ—¶ <code>åˆå§‹åŒ–è·¯ç”±è¡¨</code>:</p> <img src="/iview-dynamicRouter-doc/assets/è·¯ç”±æ”¹é€ .png" class="img-margin-top"> <div class="custom-block tip"><p class="custom-block-title">è°ƒè¯•</p> <p>åœ¨ <code>è·¯ç”±æ”¹é€ </code> ä¸­ï¼Œæˆ‘ä»¬å°†å¯¹ <code>è·¯ç”±è¡¨</code> åŠ <code>è·¯ç”±æŒ‚è½½</code> è¿›è¡Œæ”¹é€ ï¼Œå¼€å‘è¿‡ç¨‹ä¸­ä¼šäº§ç”Ÿä¼—å¤šä¸´æ—¶ bugï¼Œéœ€è¦ä¸æ–­è°ƒè¯•</p> <p><a href="/iview-dynamicRouter-doc/develop/routerRemould/debug.html">æ ‡å‡†çš„è°ƒè¯•è¿‡ç¨‹ â†’</a></p></div> <ul><li>libs &gt; <a href="/iview-dynamicRouter-doc/develop/routerRemould/#libs-router-util-js">router-util.js</a> / <a href="https://github.com/simon9124/iview-dynamicRouter/blob/master/src/store/module/app.js" target="_blank">å®Œæ•´ä»£ç  â†’</a></li> <li>router &gt; <a href="/iview-dynamicRouter-doc/develop/routerRemould/#router-routers-js">routers.js</a> / <a href="https://github.com/simon9124/iview-dynamicRouter/blob/master/src/router/routers.js" target="_blank">å®Œæ•´ä»£ç  â†’</a></li> <li>router &gt; <a href="/iview-dynamicRouter-doc/develop/routerRemould/#router-index-js">index.js</a> / <a href="https://github.com/simon9124/iview-dynamicRouter/blob/master/src/router/index.js" target="_blank">å®Œæ•´ä»£ç  â†’</a></li> <li>store &gt; module &gt; <a href="/iview-dynamicRouter-doc/develop/routerRemould/#store-module-app-js">app.js</a> / <a href="https://github.com/simon9124/iview-dynamicRouter/blob/master/src/store/module/app.js" target="_blank">å®Œæ•´ä»£ç  â†’</a></li> <li>view &gt; login &gt; <a href="/iview-dynamicRouter-doc/develop/routerRemould/#view-login-login-vue">login.vue</a> / <a href="https://github.com/simon9124/iview-dynamicRouter/blob/master/src/view/login/login.vue" target="_blank">å®Œæ•´ä»£ç  â†’</a></li></ul> <h2 id="libs-router-util-js"><a href="#libs-router-util-js" class="header-anchor">#</a> libs &gt; router-util.js</h2> <h4 id="å‡½æ•°-dynamicrouteraddï¼šåŠ è½½è·¯ç”±èœå•ï¼Œä»-localstorage-æ‹¿åˆ°è·¯ç”±ï¼Œåœ¨åˆ›å»ºè·¯ç”±æ—¶ä½¿ç”¨"><a href="#å‡½æ•°-dynamicrouteraddï¼šåŠ è½½è·¯ç”±èœå•ï¼Œä»-localstorage-æ‹¿åˆ°è·¯ç”±ï¼Œåœ¨åˆ›å»ºè·¯ç”±æ—¶ä½¿ç”¨" class="header-anchor">#</a> å‡½æ•° <code>dynamicRouterAdd</code>ï¼šåŠ è½½è·¯ç”±èœå•ï¼Œä» localStorage æ‹¿åˆ°è·¯ç”±ï¼Œåœ¨åˆ›å»ºè·¯ç”±æ—¶ä½¿ç”¨</h4> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> localRead <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@/libs/util'</span>

<span class="token comment">// åŠ è½½è·¯ç”±èœå•ï¼Œä»localStorageæ‹¿åˆ°è·¯ç”±ï¼Œåœ¨åˆ›å»ºè·¯ç”±æ—¶ä½¿ç”¨</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">dynamicRouterAdd</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token keyword">from</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> data <span class="token operator">=</span> <span class="token function">localRead</span><span class="token punctuation">(</span><span class="token string">'dynamicRouter-template'</span><span class="token punctuation">)</span>
  <span class="token keyword">let</span> dynamicRouter <span class="token operator">=</span> data <span class="token operator">!==</span> <span class="token string">''</span> <span class="token operator">?</span> <span class="token function">filterAsyncRouter</span><span class="token punctuation">(</span><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
  <span class="token comment">// console.log(`åŠ¨æ€è·¯ç”±æ•°æ®ï¼š${from}`, dynamicRouter);</span>
  <span class="token keyword">return</span> dynamicRouter
<span class="token punctuation">}</span>
</code></pre></div><h2 id="router-routers-js"><a href="#router-routers-js" class="header-anchor">#</a> router &gt; routers.js</h2> <div class="custom-block tip"><p class="custom-block-title">ä¿å­˜å‰¯æœ¬å¹¶é€€å‡ºç™»å½•</p> <p><code>routers.js</code> è·¯ç”±è¡¨æ”¹åŠ¨è¾ƒå¤§ï¼Œå»ºè®®å…ˆä¿å­˜å‰¯æœ¬åˆ° <code>routersOrg.js</code>ï¼Œä»¥ä¾¿ <code>å¯¹æ¯”è·¯ç”±è¡¨å˜åŒ–</code> æˆ–éšæ—¶ <code>æ¢å¤åŸå§‹è·¯ç”±è¡¨</code>ï¼ŒåŒæ—¶å»ºè®®æš‚æ—¶ <code>é€€å‡ºç³»ç»Ÿ</code>ï¼Œæ ¹æ®åç»­æŒ‡å— <code>é€‚æ—¶å†ç™»å½•</code> è¿›è¡Œè°ƒè¯•</p></div> <h4 id="æ•´ä½“æ”¹é€ ï¼šé™æ€è·¯ç”±-åŠ¨æ€è·¯ç”±"><a href="#æ•´ä½“æ”¹é€ ï¼šé™æ€è·¯ç”±-åŠ¨æ€è·¯ç”±" class="header-anchor">#</a> æ•´ä½“æ”¹é€ ï¼š<code>é™æ€è·¯ç”±</code> + <code>åŠ¨æ€è·¯ç”±</code></h4> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">import</span> Main <span class="token keyword">from</span> <span class="token string">'@/components/main'</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> dynamicRouterAdd <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@/libs/router-util'</span> <span class="token comment">// å¼•å…¥åŠ¨æ€è·¯ç”±</span>

<span class="token comment">// é™æ€è·¯ç”±</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> constantRouter <span class="token operator">=</span> <span class="token punctuation">[</span>
  <span class="token punctuation">{</span>
    path<span class="token operator">:</span> <span class="token string">'/login'</span><span class="token punctuation">,</span>
    name<span class="token operator">:</span> <span class="token string">'login'</span><span class="token punctuation">,</span>
    meta<span class="token operator">:</span> <span class="token punctuation">{</span> title<span class="token operator">:</span> <span class="token string">'Login - ç™»å½•'</span><span class="token punctuation">,</span> hideInMenu<span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function-variable function">component</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'@/view/login/login.vue'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    path<span class="token operator">:</span> <span class="token string">'/'</span><span class="token punctuation">,</span>
    name<span class="token operator">:</span> <span class="token string">'_home'</span><span class="token punctuation">,</span>
    redirect<span class="token operator">:</span> <span class="token string">'/home'</span><span class="token punctuation">,</span>
    component<span class="token operator">:</span> Main<span class="token punctuation">,</span>
    meta<span class="token operator">:</span> <span class="token punctuation">{</span> hideInMenu<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> notCache<span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    children<span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        path<span class="token operator">:</span> <span class="token string">'/home'</span><span class="token punctuation">,</span>
        name<span class="token operator">:</span> <span class="token string">'home'</span><span class="token punctuation">,</span>
        meta<span class="token operator">:</span> <span class="token punctuation">{</span>
          hideInMenu<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
          title<span class="token operator">:</span> <span class="token string">'é¦–é¡µ'</span><span class="token punctuation">,</span>
          notCache<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
          icon<span class="token operator">:</span> <span class="token string">'md-home'</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token function-variable function">component</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'@/view/single-page/home'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    path<span class="token operator">:</span> <span class="token string">'/401'</span><span class="token punctuation">,</span>
    name<span class="token operator">:</span> <span class="token string">'error_401'</span><span class="token punctuation">,</span>
    meta<span class="token operator">:</span> <span class="token punctuation">{</span> hideInMenu<span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function-variable function">component</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'@/view/error-page/401.vue'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    path<span class="token operator">:</span> <span class="token string">'/500'</span><span class="token punctuation">,</span>
    name<span class="token operator">:</span> <span class="token string">'error_500'</span><span class="token punctuation">,</span>
    meta<span class="token operator">:</span> <span class="token punctuation">{</span> hideInMenu<span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function-variable function">component</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'@/view/error-page/500.vue'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    path<span class="token operator">:</span> <span class="token string">'*'</span><span class="token punctuation">,</span>
    name<span class="token operator">:</span> <span class="token string">'error_404'</span><span class="token punctuation">,</span>
    meta<span class="token operator">:</span> <span class="token punctuation">{</span> hideInMenu<span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function-variable function">component</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'@/view/error-page/404.vue'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span>

<span class="token comment">// åŠ¨æ€è·¯ç”±</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> appRouter <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token operator">...</span><span class="token function">dynamicRouterAdd</span><span class="token punctuation">(</span><span class="token string">'router.js'</span><span class="token punctuation">)</span><span class="token punctuation">]</span>

<span class="token keyword">export</span> <span class="token keyword">const</span> routes <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token operator">...</span>constantRouter<span class="token punctuation">,</span> <span class="token operator">...</span>appRouter<span class="token punctuation">]</span>

<span class="token comment">// æ‰€æœ‰ä¸Šé¢å®šä¹‰çš„è·¯ç”±éƒ½è¦å†™åœ¨ä¸‹é¢è¾“å‡º</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> routes
</code></pre></div><p><a href="https://github.com/simon9124/iview-dynamicRouter/blob/master/src/router/routers.js" target="_blank"><code>routers.js</code> å®Œæ•´ä»£ç  â†’</a></p> <h2 id="router-index-js"><a href="#router-index-js" class="header-anchor">#</a> router &gt; index.js</h2> <h4 id="routes-æ”¹ä¸ºèŠ±æ‹¬å·å¯¼å…¥"><a href="#routes-æ”¹ä¸ºèŠ±æ‹¬å·å¯¼å…¥" class="header-anchor">#</a> <code>routes</code> æ”¹ä¸ºèŠ±æ‹¬å·å¯¼å…¥</h4> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span>
  routes<span class="token punctuation">,</span> <span class="token comment">// æ€»è·¯ç”±è¡¨</span>
  constantRouter<span class="token punctuation">,</span> <span class="token comment">// é™æ€è·¯ç”±è¡¨</span>
<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'./routers'</span>
</code></pre></div><h4 id="å‡½æ•°-refreshrouteï¼šåˆå§‹åŒ–è·¯ç”±è¡¨åˆ·æ–°"><a href="#å‡½æ•°-refreshrouteï¼šåˆå§‹åŒ–è·¯ç”±è¡¨åˆ·æ–°" class="header-anchor">#</a> å‡½æ•° <code>refreshRoute</code>ï¼šåˆå§‹åŒ–è·¯ç”±è¡¨åˆ·æ–°</h4> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">refreshRoute</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> routes <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token operator">...</span>constantRouter<span class="token punctuation">]</span>
  <span class="token comment">// æ–°è·¯ç”±å®ä¾‹matcerï¼Œèµ‹å€¼ç»™æ—§è·¯ç”±å®ä¾‹çš„matcherï¼Œï¼ˆç›¸å½“äºreplaceRouterï¼‰</span>
  router<span class="token punctuation">.</span>matcher <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Router</span><span class="token punctuation">(</span><span class="token punctuation">{</span> routes <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span>matcher
<span class="token punctuation">}</span>
</code></pre></div><div class="custom-block tip"><p class="custom-block-title">é‡ç½®è·¯ç”±</p> <p><code>vue-router</code> æ²¡æœ‰æä¾› <code>remove routes</code> æ–¹æ³•ï¼Œå› æ­¤æœ‰ 2 ç§æ–¹æ³•æ¸…ç©ºåŠ¨æ€è·¯ç”±ï¼š</p> <ul><li>æ³•ä¸€ï¼š<code>location.reload()</code> åˆ·æ–°é¡µé¢ï¼Œé¡µé¢ä¼šé—ªï¼Œæš‚æ—¶ä¸ç”¨</li> <li>æ³•äºŒï¼š<code>router.matcher</code> é‡ç½® <code>matcher</code>ï¼Œä¹Ÿæ˜¯æˆ‘è¿™é‡Œç”¨åˆ°çš„åŠæ³•</li></ul></div> <h2 id="store-module-app-js"><a href="#store-module-app-js" class="header-anchor">#</a> store &gt; module &gt; app.js</h2> <h4 id="_1-æš‚æ—¶éšè—-å·¦ä¾§èœå•ï¼Œæ³¨æ‰-getters-ä¸­çš„-menulist-åŠç›¸å…³ä¾èµ–"><a href="#_1-æš‚æ—¶éšè—-å·¦ä¾§èœå•ï¼Œæ³¨æ‰-getters-ä¸­çš„-menulist-åŠç›¸å…³ä¾èµ–" class="header-anchor">#</a> 1.æš‚æ—¶éšè— <code>å·¦ä¾§èœå•</code>ï¼Œæ³¨æ‰ <code>getters</code> ä¸­çš„ <code>menuList</code> åŠç›¸å…³ä¾èµ–</h4> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// import routers from &quot;@/router/routers&quot;;</span>
<span class="token operator">...</span>
getters<span class="token operator">:</span> <span class="token punctuation">{</span>
  <span class="token comment">// menuList: (state, getters, rootState) =&gt;</span>
  <span class="token comment">//   getMenuByRouter(routers, rootState.user.access),</span>
  <span class="token function-variable function">errorCount</span><span class="token operator">:</span> <span class="token parameter">state</span> <span class="token operator">=&gt;</span> state<span class="token punctuation">.</span>errorList<span class="token punctuation">.</span>length
<span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre></div><h4 id="_2-getrouters-æ–¹æ³•çš„-getallmenus-æ‰§è¡Œ-resolveï¼Œå¹¶ç›‘å¬æ­¤æ—¶çš„è·¯ç”±æ•°æ®"><a href="#_2-getrouters-æ–¹æ³•çš„-getallmenus-æ‰§è¡Œ-resolveï¼Œå¹¶ç›‘å¬æ­¤æ—¶çš„è·¯ç”±æ•°æ®" class="header-anchor">#</a> 2.<code>getRouters</code> æ–¹æ³•çš„ <code>getAllMenus</code> æ‰§è¡Œ <code>resolve</code>ï¼Œå¹¶ç›‘å¬æ­¤æ—¶çš„è·¯ç”±æ•°æ®</h4> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token function">getAllMenus</span><span class="token punctuation">(</span>rootState<span class="token punctuation">.</span>user<span class="token punctuation">.</span>token<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token operator">...</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'è½¬æ¢æˆç»„ä»¶åçš„è·¯ç”±æ•°æ®ï¼š'</span><span class="token punctuation">,</span> gotRouter<span class="token punctuation">)</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'å½“å‰è·¯ç”±ï¼š'</span><span class="token punctuation">,</span> router<span class="token punctuation">)</span> <span class="token comment">// ç›‘å¬å½“å‰è·¯ç”±</span>
  <span class="token function">resolve</span><span class="token punctuation">(</span>gotRouter<span class="token punctuation">)</span> <span class="token comment">// æ‰§è¡Œ resolve</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p>æ­¤æ—¶ <code>åˆ·æ–°é¡µé¢</code> ç¡®ä¿è·¯ç”±è¡¨åªä¿ç•™ <code>é™æ€è·¯ç”±</code>ï¼ˆè‹¥æœªç™»å‡ºåˆ™ç™»å‡ºååˆ·æ–°ï¼‰ï¼Œçœ‹çœ‹ <code>ç”¨æˆ·ç™»å½•</code> åçš„é¡µé¢ï¼š</p> <img src="/iview-dynamicRouter-doc/assets/è·¯ç”±æ”¹é€ _æœªæ·»åŠ è·¯ç”±.png" style="width:100%;"> <div class="custom-block tip"><p class="custom-block-title">æ­¤æ—¶çš„é¡µé¢</p> <p>æ­¤æ—¶ç™»å½•åçš„é¡µé¢æœ‰å¦‚ä¸‹å‡ ç‚¹éœ€è¦æˆ‘ä»¬å¤„ç†ï¼š</p> <ul><li>1.å·¦ä¾§èœå•åœ¨ç¬¬ä¸€æ­¥å·²éšè—ï¼Œ<code>èœå•æ”¹é€ </code> è§åç»­</li> <li>2.è·¯ç”±è¡¨ä¸ºåˆå§‹çš„ <code>é™æ€è·¯ç”±</code>ï¼Œéœ€è¦å¾€è·¯ç”±è¡¨æ·»åŠ ä¹‹å‰ <code>å¤„ç†å¥½çš„åŠ¨æ€è·¯ç”±</code> æ•°æ®</li></ul></div> <h4 id="_3-actions-è¿½åŠ -addrouterdataï¼Œæ·»åŠ åŠ¨æ€è·¯ç”±ï¼š"><a href="#_3-actions-è¿½åŠ -addrouterdataï¼Œæ·»åŠ åŠ¨æ€è·¯ç”±ï¼š" class="header-anchor">#</a> 3.<code>actions</code> è¿½åŠ  <code>addRouterData</code>ï¼Œæ·»åŠ åŠ¨æ€è·¯ç”±ï¼š</h4> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// åŠ¨æ€æ·»åŠ è·¯ç”±æ•°æ®</span>
<span class="token function">addRouterData</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> commit<span class="token punctuation">,</span> rootState <span class="token punctuation">}</span><span class="token punctuation">,</span> routes</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// åŠ¨æ€æ·»åŠ è·¯ç”±</span>
  router<span class="token punctuation">.</span><span class="token function">addRoutes</span><span class="token punctuation">(</span>routes<span class="token punctuation">)</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;æ·»åŠ åŠ¨æ€è·¯ç”±åï¼š&quot;</span><span class="token punctuation">,</span> router<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token comment">// è·å–åŠ¨æ€è·¯ç”±æ•°æ®</span>
<span class="token function">getRouters</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> dispatch<span class="token punctuation">,</span> commit<span class="token punctuation">,</span> rootState <span class="token punctuation">}</span><span class="token punctuation">,</span> routes</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> gotRouter <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// è®¾ç½®åŠ¨æ€è·¯ç”±</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">localRead</span><span class="token punctuation">(</span><span class="token string">&quot;dynamicRouter-template&quot;</span><span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">/* localStorageé‡ŒdynamicRouterå€¼ä¸ºç©º -&gt; æ²¡æœ‰è·¯ç”±æ•°æ® -&gt; è·å–è·¯ç”±æ•°æ® */</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;è·å–è·¯ç”±ï¼šä»api&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">try</span> <span class="token punctuation">{</span>
        <span class="token function">getAllMenus</span><span class="token punctuation">(</span>rootState<span class="token punctuation">.</span>user<span class="token punctuation">.</span>token<span class="token punctuation">)</span>
          <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">res</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            <span class="token operator">...</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;è½¬æ¢æˆç»„ä»¶åçš„è·¯ç”±æ•°æ®ï¼š&quot;</span><span class="token punctuation">,</span> gotRouter<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token string">&quot;addRouterData&quot;</span><span class="token punctuation">,</span> gotRouter<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">res</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
              <span class="token function">resolve</span><span class="token punctuation">(</span>gotRouter<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span><span class="token punctuation">)</span>
          <span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token parameter">err</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span> <span class="token operator">...</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token operator">...</span> <span class="token punctuation">}</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      <span class="token comment">/* æœ‰è·¯ç”±æ•°æ® -&gt; ç›´æ¥ä»localStorageé‡Œé¢è·å– */</span>
      <span class="token operator">...</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p><code>é€€å‡ºç™»å½•</code> -&gt; <code>åˆ·æ–°é¡µé¢</code> -&gt; <code>ç”¨æˆ·ç™»å½•</code>ï¼Œå†æµ‹ï¼š</p> <img src="/iview-dynamicRouter-doc/assets/è·¯ç”±æ”¹é€ _æ·»åŠ è·¯ç”±.png" style="width:100%;"> <div class="custom-block warning"><p class="custom-block-title">è·¯ç”±æ²¡æœ‰æ·»åŠ ï¼Ÿ</p> <p><code>router</code> çš„è·¯ç”±å¹¶ <code>ä¸æ˜¯å“åº”å¼</code> çš„ï¼Œä½¿ç”¨ <code>router.addRoutes</code> æ·»åŠ çš„è·¯ç”± <code>ä¸ä¼šæ·»åŠ åˆ°è·¯ç”±ç¼“å­˜</code> é‡Œé¢ ğŸ˜¡ï¼Œæ‰€ä»¥ <code>åªèƒ½è¯»å–åˆ°åˆå§‹è·¯ç”±</code>ã€‚è¿™é‡Œæˆ‘çš„åŠæ³•æ˜¯ <code>æ‰‹åŠ¨å¾€ router.options.routes æ·»åŠ </code> è¦æ·»åŠ çš„è·¯ç”±</p></div> <h4 id="_4-addrouterdata-æ–¹æ³•ä¸­ï¼Œæ‰‹åŠ¨å¾€-router-options-routes-æ·»åŠ -åŠ¨æ€è·¯ç”±"><a href="#_4-addrouterdata-æ–¹æ³•ä¸­ï¼Œæ‰‹åŠ¨å¾€-router-options-routes-æ·»åŠ -åŠ¨æ€è·¯ç”±" class="header-anchor">#</a> 4.<code>addRouterData</code> æ–¹æ³•ä¸­ï¼Œ<code>æ‰‹åŠ¨å¾€ router.options.routes æ·»åŠ </code> åŠ¨æ€è·¯ç”±</h4> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> routerUpdateHandle <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@/libs/router-util'</span>
</code></pre></div><div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// åŠ¨æ€æ·»åŠ è·¯ç”±æ•°æ® -&gt; é¦–æ¬¡ç™»å½•æŒ‚è½½è·¯ç”±</span>
<span class="token function">addRouterData</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> commit<span class="token punctuation">,</span> rootState <span class="token punctuation">}</span><span class="token punctuation">,</span> routes</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// åŠ¨æ€æ·»åŠ è·¯ç”± - çœŸæ­£æ·»åŠ è·¯ç”±ï¼ˆä¸ä¼šç«‹åˆ»åˆ·æ–°ï¼Œéœ€è¦æ‰‹åŠ¨å¾€router.options.routesé‡Œæ·»åŠ æ•°æ®ï¼‰</span>
  router<span class="token punctuation">.</span><span class="token function">addRoutes</span><span class="token punctuation">(</span>routes<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">routerUpdateHandle</span><span class="token punctuation">(</span>routes<span class="token punctuation">,</span> router<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// æ‰‹åŠ¨æ·»åŠ è·¯ç”±æ•°æ®</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;æ·»åŠ åŠ¨æ€è·¯ç”±åï¼š&quot;</span><span class="token punctuation">,</span> router<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre></div><ul><li><code>router-util.js</code> è¿½åŠ  <code>routerUpdateHandle</code> æ–¹æ³•ï¼š</li></ul> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token comment">// @å‡½æ•°: éå†routesè·¯ç”±æ•°æ®ï¼Œæ‰‹åŠ¨å¾€router.options.routesé‡Œæ·»åŠ æ•°æ®</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">routerUpdateHandle</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">routes<span class="token punctuation">,</span> router</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// éå†routes</span>
  routes<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">_route</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">/* æ‰‹åŠ¨å¾€router.options.routesé‡Œæ·»åŠ æ•°æ® */</span>
    <span class="token comment">// 1.æœ€å¤–å±‚æœ‰æ²¡æ·»åŠ çš„ç›´æ¥æ·»åŠ </span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>
      <span class="token operator">!</span>router<span class="token punctuation">.</span>options<span class="token punctuation">.</span>routes<span class="token punctuation">.</span><span class="token function">some</span><span class="token punctuation">(</span>
        <span class="token punctuation">(</span><span class="token parameter">_router</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> _router<span class="token punctuation">.</span>meta<span class="token punctuation">.</span>id <span class="token operator">===</span> _route<span class="token punctuation">.</span>meta<span class="token punctuation">.</span>id
      <span class="token punctuation">)</span>
    <span class="token punctuation">)</span> <span class="token punctuation">{</span>
      router<span class="token punctuation">.</span>options<span class="token punctuation">.</span>routes<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>_route<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// 2.å†…å±‚è·¯ç”±é€’å½’æ·»åŠ </span>
    <span class="token keyword">const</span> <span class="token function-variable function">routerChildAddHandle</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">array1<span class="token punctuation">,</span> child2</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token comment">// éå†array1</span>
      array1<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">child1</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token comment">// æ‰¾åˆ°pathä¸€è‡´çš„æ•°æ®</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>child1<span class="token punctuation">.</span>meta<span class="token punctuation">.</span>id <span class="token operator">===</span> child2<span class="token punctuation">.</span>meta<span class="token punctuation">.</span>id<span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token comment">// éå†child2.children</span>
          child2<span class="token punctuation">.</span>children<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">_child2</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            <span class="token comment">// æ¯”å¯¹child1.children -&gt; æœ‰æ²¡æ·»åŠ çš„ç›´æ¥æ·»åŠ </span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>
              <span class="token operator">!</span>child1<span class="token punctuation">.</span>children<span class="token punctuation">.</span><span class="token function">some</span><span class="token punctuation">(</span>
                <span class="token punctuation">(</span><span class="token parameter">_child1</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> _child1<span class="token punctuation">.</span>meta<span class="token punctuation">.</span>id <span class="token operator">===</span> _child2<span class="token punctuation">.</span>meta<span class="token punctuation">.</span>id
              <span class="token punctuation">)</span>
            <span class="token punctuation">)</span> <span class="token punctuation">{</span>
              child1<span class="token punctuation">.</span>children<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>_child2<span class="token punctuation">)</span>
            <span class="token punctuation">}</span>
            <span class="token comment">// é€’å½’</span>
            <span class="token function">routerChildAddHandle</span><span class="token punctuation">(</span>child1<span class="token punctuation">.</span>children<span class="token punctuation">,</span> _child2<span class="token punctuation">)</span>
          <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token function">routerChildAddHandle</span><span class="token punctuation">(</span>router<span class="token punctuation">.</span>options<span class="token punctuation">.</span>routes<span class="token punctuation">,</span> _route<span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p>è€æ ·å­~<code>é€€å‡ºç™»å½•</code> -&gt; <code>åˆ·æ–°é¡µé¢</code> -&gt; <code>ç”¨æˆ·ç™»å½•</code>ï¼Œæµ‹ï¼</p> <img src="/iview-dynamicRouter-doc/assets/è·¯ç”±æ”¹é€ _æ‰‹åŠ¨æ·»åŠ è·¯ç”±.png" style="width:100%;"> <div class="custom-block tip"><p class="custom-block-title">è·¯ç”±æ·»åŠ æˆåŠŸ</p> <p><code>åŠ¨æ€è·¯ç”±æ·»åŠ </code> æˆåŠŸå•¦ ğŸ˜ï¼Œå°½ç®¡ <code>å·¦ä¾§èœå•æš‚æ—¶éšè—</code> ç€ï¼ˆè¿˜éœ€æ”¹é€ ï¼‰ï¼Œä½†å·²ç»å¯ä»¥ <code>åœ¨åœ°å€æ è¾“å…¥é…ç½®å¥½çš„è·¯ç”±åœ°å€</code> å¹¶ <code>æŸ¥çœ‹ç›¸åº”é¡µé¢</code> å•¦ï¼š</p> <img src="/iview-dynamicRouter-doc/assets/è·¯ç”±æ”¹é€ _è·¯ç”±æ·»åŠ æˆåŠŸ1.png" style="width:100%;"> <img src="/iview-dynamicRouter-doc/assets/è·¯ç”±æ”¹é€ _è·¯ç”±æ·»åŠ æˆåŠŸ2.png" style="width:100%;"></div> <h2 id="view-login-login-vue"><a href="#view-login-login-vue" class="header-anchor">#</a> view &gt; login &gt; login.vue</h2> <h4 id="å¼•å…¥-router-index-js-é‡Œçš„-refreshroute-æ–¹æ³•ï¼Œåœ¨åˆå§‹åŒ–æ•°æ®æ—¶-é‡ç½®è·¯ç”±ã€æ¸…ç©º-localstorage-ä¸­çš„-dynamicrouter-template-æ•°æ®"><a href="#å¼•å…¥-router-index-js-é‡Œçš„-refreshroute-æ–¹æ³•ï¼Œåœ¨åˆå§‹åŒ–æ•°æ®æ—¶-é‡ç½®è·¯ç”±ã€æ¸…ç©º-localstorage-ä¸­çš„-dynamicrouter-template-æ•°æ®" class="header-anchor">#</a> å¼•å…¥ <code>router &gt; index.js</code> é‡Œçš„ <code>refreshRoute</code> æ–¹æ³•ï¼Œåœ¨åˆå§‹åŒ–æ•°æ®æ—¶ <code>é‡ç½®è·¯ç”±</code>ã€æ¸…ç©º <code>localStorage</code> ä¸­çš„ <code>dynamicRouter-template</code> æ•°æ®</h4> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> refreshRoute <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@/router'</span> <span class="token comment">// è·¯ç”±åˆå§‹åŒ–ï¼Œæ¸…ç©ºåŠ¨æ€è·¯ç”±</span>
</code></pre></div><div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token function">created</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  localStorage<span class="token punctuation">.</span><span class="token function">setItem</span><span class="token punctuation">(</span><span class="token string">&quot;dynamicRouter-template&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// æ¸…ç©ºè·¯ç”±ç¼“å­˜æ•°æ®</span>
  <span class="token function">refreshRoute</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// è·¯ç”±é‡ç½®</span>
<span class="token punctuation">}</span>
</code></pre></div></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">ä¸Šæ¬¡æ›´æ–°:</span> <span class="time">6/19/2020, 11:48:01 AM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      â†
      <a href="/iview-dynamicRouter-doc/develop/routerRemould/debug.html" class="prev">
        è°ƒè¯•
      </a></span> <span class="next"><a href="/iview-dynamicRouter-doc/develop/routerRemould/achievement.html">
        æ€»ç»“ &amp; æˆæœ
      </a>
      â†’
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/iview-dynamicRouter-doc/assets/js/app.05072671.js" defer></script><script src="/iview-dynamicRouter-doc/assets/js/2.cbc301c3.js" defer></script><script src="/iview-dynamicRouter-doc/assets/js/15.23f75260.js" defer></script>
  </body>
</html>
